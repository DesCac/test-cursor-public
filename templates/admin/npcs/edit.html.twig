{% extends 'base.html.twig' %}

{% block title %}Edit {{ npc.name }} - {{ parent() }}{% endblock %}

{% block body %}
<section class="editor-page">
    <header class="editor-page__header">
        <a class="editor-page__back" href="{{ path('admin_npcs_list') }}">← Назад к NPC</a>
        <div class="editor-page__meta">
            <h2 class="editor-page__title">Редактор NPC</h2>
            <p class="editor-page__subtitle">{{ npc.name }}</p>
            {% if npc.description %}
                <p class="editor-page__description">{{ npc.description }}</p>
            {% endif %}
        </div>
    </header>

    <div id="dialog-editor" class="editor-page__workspace">
        <!-- Vue app will be mounted here -->
    </div>
</section>

<script>
    window.npcData = {
        id: {{ npc.id }},
        name: "{{ npc.name|escape('js') }}",
        description: "{{ npc.description|default('')|escape('js') }}",
    };
</script>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="module" src="{{ asset('build/npc-editor.js') }}"></script>
{% endblock %}
