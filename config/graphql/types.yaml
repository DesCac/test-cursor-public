Query:
    type: object
    config:
        fields:
            npc:
                type: "NPC"
                args:
                    id:
                        type: "Int!"
                resolve: "@=service('App\\\\GraphQL\\\\Resolver\\\\NPCResolver').resolve(args['id'])"
            npcs:
                type: "[NPC!]!"
                resolve: "@=service('App\\\\GraphQL\\\\Resolver\\\\NPCResolver').resolveAll()"
            quest:
                type: "Quest"
                args:
                    id:
                        type: "Int!"
                resolve: "@=service('App\\\\GraphQL\\\\Resolver\\\\QuestResolver').resolve(args['id'])"
            quests:
                type: "[Quest!]!"
                resolve: "@=service('App\\\\GraphQL\\\\Resolver\\\\QuestResolver').resolveAll()"
            validateDialogChoice:
                type: "ValidationResult!"
                args:
                    npcId:
                        type: "Int!"
                    nodeId:
                        type: "Int!"
                    choiceId:
                        type: "Int!"
                resolve: "@=service('App\\\\GraphQL\\\\Resolver\\\\ValidationResolver').validateDialogChoice(args['npcId'], args['nodeId'], args['choiceId'])"

NPC:
    type: object
    config:
        fields:
            id:
                type: "Int!"
            name:
                type: "String!"
            description:
                type: "String"
            dialogNodes:
                type: "[DialogNode!]!"

Quest:
    type: object
    config:
        fields:
            id:
                type: "Int!"
            name:
                type: "String!"
            description:
                type: "String"
            objectives:
                type: "String"
                resolve: "@=value.getObjectives() ? json_encode(value.getObjectives()) : null"
            rewards:
                type: "String"
                resolve: "@=value.getRewards() ? json_encode(value.getRewards()) : null"
            requirements:
                type: "String"
                resolve: "@=value.getRequirements() ? json_encode(value.getRequirements()) : null"
            logicNodes:
                type: "[QuestNode!]!"

DialogNode:
    type: object
    config:
        fields:
            id:
                type: "Int!"
            nodeType:
                type: "String!"
            text:
                type: "String"
            conditions:
                type: "String"
                resolve: "@=value.getConditions() ? json_encode(value.getConditions()) : null"
            positionX:
                type: "Float"
            positionY:
                type: "Float"
            connections:
                type: "[DialogConnection!]!"
                resolve: "@=value.getOutgoingConnections()"

DialogConnection:
    type: object
    config:
        fields:
            id:
                type: "Int!"
            sourceNode:
                type: "DialogNode!"
            targetNode:
                type: "DialogNode!"
            choiceText:
                type: "String"
            conditions:
                type: "String"
                resolve: "@=value.getConditions() ? json_encode(value.getConditions()) : null"

QuestNode:
    type: object
    config:
        fields:
            id:
                type: "Int!"
            nodeType:
                type: "String!"
            data:
                type: "String"
                resolve: "@=value.getData() ? json_encode(value.getData()) : null"
            conditions:
                type: "String"
                resolve: "@=value.getConditions() ? json_encode(value.getConditions()) : null"
            positionX:
                type: "Float"
            positionY:
                type: "Float"
            connections:
                type: "[QuestConnection!]!"
                resolve: "@=value.getOutgoingConnections()"

QuestConnection:
    type: object
    config:
        fields:
            id:
                type: "Int!"
            sourceNode:
                type: "QuestNode!"
            targetNode:
                type: "QuestNode!"
            conditions:
                type: "String"
                resolve: "@=value.getConditions() ? json_encode(value.getConditions()) : null"

ValidationResult:
    type: object
    config:
        fields:
            valid:
                type: "Boolean!"
            message:
                type: "String"
            nextNodeId:
                type: "Int"
