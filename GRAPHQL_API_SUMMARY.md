# –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π GraphQL API

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö GraphiQL
**–§–∞–π–ª:** `public/graphiql.html`

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
- `type` ‚Üí `nodeType`
- `questNodes` ‚Üí `logicNodes`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–∑–æ–ª–≤–µ—Ä—ã –¥–ª—è –ø–æ–ª–µ–π
**–§–∞–π–ª:** `config/graphql/types.yaml`

–î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∑–æ–ª–≤–µ—Ä—ã –¥–ª—è:
- `DialogNode.connections` ‚Üí –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ `getOutgoingConnections()`
- `DialogNode.conditions` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `DialogConnection.conditions` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `QuestNode.connections` ‚Üí –º–∞–ø–ø–∏–Ω–≥ –Ω–∞ `getOutgoingConnections()`
- `QuestNode.data` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `QuestNode.conditions` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `QuestConnection.conditions` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `Quest.objectives` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `Quest.rewards` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É
- `Quest.requirements` ‚Üí —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è JSON –≤ —Å—Ç—Ä–æ–∫—É

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π

### DialogNode
```graphql
{
  id              # Int!
  nodeType        # String! (–Ω–µ "type")
  text            # String
  conditions      # String (JSON)
  positionX       # Float
  positionY       # Float
  connections     # [DialogConnection!]! (–∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
}
```

### QuestNode
```graphql
{
  id              # Int!
  nodeType        # String! (–Ω–µ "type")
  data            # String (JSON)
  conditions      # String (JSON)
  positionX       # Float
  positionY       # Float
  connections     # [QuestConnection!]! (–∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
}
```

### Quest
```graphql
{
  id              # Int!
  name            # String!
  description     # String
  objectives      # String (JSON –º–∞—Å—Å–∏–≤)
  rewards         # String (JSON –æ–±—ä–µ–∫—Ç)
  requirements    # String (JSON –æ–±—ä–µ–∫—Ç)
  logicNodes      # [QuestNode!]! (–Ω–µ "questNodes")
}
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker)
```bash
docker-compose exec php bin/console cache:clear
```

### 2. –û—Ç–∫—Ä—ã—Ç—å GraphiQL
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost/graphiql.html`

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
–°–º. –ø—Ä–∏–º–µ—Ä—ã –≤ —Ñ–∞–π–ª–µ `GRAPHQL_EXAMPLES.md`

## üí° –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **JSON –ø–æ–ª—è –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `JSON.parse()` –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
2. **–ü–æ–ª–µ `connections` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** –∏–∑ —É–∑–ª–∞
3. **–ò–º–µ–Ω–∞ –ø–æ–ª–µ–π —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—á–Ω—ã–µ –∏–º–µ–Ω–∞
4. **–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã** - –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏ –∫–µ—à–∞ API –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `GRAPHQL_EXAMPLES.md` - –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- `GRAPHQL_FIXES.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- `public/graphiql.html` - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
