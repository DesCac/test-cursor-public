# Security Policy

## Поддерживаемые версии

Мы поддерживаем следующие версии проекта:

| Version | Supported          |
| ------- | ------------------ |
| 1.0.x   | :white_check_mark: |

## Сообщение об уязвимостях

Если вы обнаружили уязвимость в системе безопасности, пожалуйста, **НЕ** создавайте публичный issue.

Вместо этого:

1. Отправьте email на [security@example.com] с описанием:
   - Тип уязвимости
   - Шаги для воспроизведения
   - Возможное влияние
   - Предложения по исправлению (если есть)

2. Дайте нам разумное время для исправления (обычно 90 дней)

3. Мы подтвердим получение в течение 48 часов

4. Мы будем держать вас в курсе процесса исправления

## Известные вопросы безопасности

### Dev-версия

⚠️ **Внимание**: Это dev-версия со следующими известными проблемами:

1. **Слабые пароли по умолчанию**
   - Измените `ADMIN_USER` и `ADMIN_PASSWORD` в `.env`

2. **GraphQL API без авторизации**
   - API доступен публично
   - Добавьте авторизацию для продакшена

3. **Отсутствует HTTPS**
   - Настройте SSL/TLS для продакшена

4. **Debug режим включен**
   - Установите `APP_ENV=prod` и `APP_DEBUG=0` в продакшене

5. **Слабый APP_SECRET**
   - Сгенерируйте криптографически стойкий секрет

## Рекомендации для продакшена

### Обязательно

- [ ] Измените все пароли по умолчанию
- [ ] Сгенерируйте безопасный `APP_SECRET`
- [ ] Настройте HTTPS/SSL
- [ ] Отключите debug режим (`APP_ENV=prod`, `APP_DEBUG=0`)
- [ ] Настройте файрвол для PostgreSQL
- [ ] Ограничьте доступ к админ-панели по IP
- [ ] Добавьте rate limiting для API
- [ ] Настройте регулярные бэкапы БД

### Рекомендуется

- [ ] Добавьте JWT/OAuth2 авторизацию для GraphQL API
- [ ] Настройте мониторинг и логирование
- [ ] Используйте CDN для статических ресурсов
- [ ] Настройте CORS правильно
- [ ] Добавьте WAF (Web Application Firewall)
- [ ] Регулярно обновляйте зависимости
- [ ] Настройте автоматические security updates

### GraphQL

```yaml
# Пример настройки авторизации для GraphQL
security:
    firewalls:
        graphql:
            pattern: ^/graphql
            stateless: true
            custom_authenticator: App\Security\GraphQLAuthenticator
```

### Ограничение доступа к админке

```nginx
# Nginx пример - ограничение по IP
location /admin {
    allow 192.168.1.0/24;
    deny all;
    # ... остальная конфигурация
}
```

## Безопасное хранение секретов

Для продакшена используйте:
- Symfony Secrets для чувствительных данных
- Переменные окружения на уровне ОС
- Vault системы (HashiCorp Vault, AWS Secrets Manager)

```bash
# Пример использования Symfony Secrets
php bin/console secrets:set DATABASE_URL
php bin/console secrets:set ADMIN_PASSWORD
```

## Регулярные проверки

```bash
# Проверка зависимостей на уязвимости
composer audit

# Обновление зависимостей
composer update --with-all-dependencies

# Запуск security checker (если установлен)
symfony security:check
```

## История изменений безопасности

- **2024-11-10**: Начальная версия Security Policy
